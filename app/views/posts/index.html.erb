<div>


<h2>Add a post: </h2>
<%= form_with model: @post do |form| %>
<p>
<%= form.label :description %><br>
<%= form.text_field :description %>
</p>
    <%= form.hidden_field :user_id, value: session[:user_id] %>
<p>
<%= form.submit %>
</p>
<% end %>

<br>
<% @posts.each do |post|%>
    <% @user = User.find(post.user_id) %>
    <p><strong>Description: </strong></p><br>
        <p> This has been added by <%=  post.user.username %> </p>
    <%= post.description%><br>

    <p> Added at  <%=  post.created_at %> </p>
<%= link_to "Delete", post_path(post.id),
                  method: :delete,
                  data: { confirm: "Are you sure?" } %>
        <p><%= post.likes.count %> <%= (post.likes.count) == 1 ? 'Like' : 'Likes'%></p>
        <%= flash[:notice] %>
        <%= button_to 'Like', post_likes_path(post.id), method: :post%><br>
  
        <%= link_to "Comment", new_post_comment_path(post.id) %>

              <p><% post.comments.each do |comment|%>
                <%= comment.text%><br>
              <% end %>


<% end %>
</div>
 <!-- Load React. -->
  <!-- Note: when deploying, replace "development.js" with "production.min.js". -->
  <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

  <!-- Load our React component. -->
  <%= javascript_include_tag 'interface' %>
<%= javascript_include_tag 'PostPage.js' %>
<%= javascript_include_tag 'LikeButton.js' %>
<%# type = "text/babel" %>

